<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks49team01.admin.mapper.AdminReviewMapper">

	<resultMap type="AdminReview" id="reviewResultMap">
		<id column="review_num" 				property="reviewNum"/>
		<result column="member_id" 				property="memberId"/>
		<result column="branchCode" 			property="branchCode"/>
		<result column="stay_period_code" 		property="stayPeriodCode"/>
		<result column="room_code" 				property="roomCode"/>
		<result column="review_context" 		property="reviewContext"/>
		<result column="review_date" 			property="reviewDate"/>
		<result column="review_views" 			property="reviewViews"/>
		<result column="review_file_code" 		property="reviewFileCode"/>
		
	</resultMap>
	
 	<select id="getReviewList" resultMap="reviewResultMap">
		SELECT
			r.review_num,
			r.member_id,
			r.branch_code,
			r.payments_due_code,
			r.stay_period_code,
			r.room_code,
			r.review_context,
			r.review_date,
			r.review_views,
			r.review_file_code
		FROM
			review AS r;
 	</select>
 	
 		<resultMap type="AdminReviewCategory" id="CategoryResultMap">
		<id column="category_code" 						property="categoryCode"/>
		<result column="member_id" 						property="memberId"/>
		<result column="review_category_kind" 			property="reviewCategoryKind"/>
		<result column="review_category_context" 		property="reviewCategoryContext"/>
		<result column="review_category_register_date" 	property="reviewCategoryRegisterDate"/>	
	</resultMap>
	
 	<select id="getReviewCategory" resultMap="CategoryResultMap">
		SELECT
			rc.category_code,
			rc.member_id,
			rc.review_category_kind,
			rc.review_category_context,
			rc.review_category_register_date
		FROM
			review_category AS rc;		
 	</select>
 	
 	 	<select id="getReviewCategoryContext" resultMap="CategoryResultMap">
		SELECT
			rc.category_code,
			rc.member_id,
			rc.review_category_kind,
			rc.review_category_context,
			rc.review_category_register_date
		FROM
			review_category AS rc
		<where>
			<if test="reviewCategoryContext != null and reviewCategoryContext != ''">
				rc.review_category_context LIKE CONCAT('%', #{reviewCategoryContext}, '%')
			</if>
		</where>				
 	</select>
 	

</mapper>