<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks49team01.admin.mapper.AdminNoticeBoardMapper">

<resultMap type="AdminNoticeBoard" id="usersNotice">
		<id 	column="notice_board_code" 		property="noticeBoardCode" />
		<result column="branch_code" 		property="branchCode"/>
		<result column="member_id" 		property="memberId"/>
		<result column="notice_board_title" 		property="noticeBoardTitle"/>
		<result column="notice_board_content" 		property="noticeBoardContent"/>
		<result column="notice_board_reg_date" 		property="noticeBoardRegDate"/>
		<association property="adminUserLevel" javaType="AdminUserLevel">
    <!-- id: 테이블의 PK컬럼 -->
    <id column="mem_level_code" property="mem_level_code"/>
    <!-- result: 테이블의 PK컬럼을 제외한 컬럼 -->
    <result column="member_id" property="member_id"/>
    <result column="membership_rating" property="membership_rating"/>
    <result column="System_registration_time" property="System_registration_time"/>
</association>
		
	</resultMap>
	
	<insert id="addNoticeBoardList" parameterType="AdminNoticeBoard" useGeneratedKeys="true" keyProperty="noticeBoardCode">
    INSERT INTO notice_board
        (branch_code, member_id, notice_board_title, notice_board_content, notice_board_reg_date)
    VALUES
        (#{branchCode}, #{memberId}, #{noticeBoardTitle}, #{noticeBoardContent}, NOW())
</insert>
	
	
<!-- <insert id="addNoticeBoardList" parameterType="AdminNoticeBoard" >

INSERT INTO notice_board
	(notice_board_code, branch_code, member_id, notice_board_title, notice_board_content, notice_board_reg_date)
	VALUES (#{noticeBoardCode},#{branchCode}, #{memberId}, #{noticeBoardTitle}, #{noticeBoardContent}, NOW())
	
</insert> -->
	
<select id="getSearchForNoticeList" resultMap="usersNotice">
	select
notice_board_code,
branch_code,
member_id,
notice_board_title,
notice_board_content,
notice_board_reg_date
FROM
notice_board
<where>
		<if test="searchKey != null and searchKey != ''">
			<choose>
				<otherwise>					
					${searchKey} LIKE CONCAT('%', #{searchValue}, '%')
				</otherwise>
			</choose>
		</if>
	</where>
</select>
	
	
<select id="getNoticeBoardList" resultMap="usersNotice">
select
	notice_board_code,
	branch_code,
	member_id,
	notice_board_title,
	notice_board_content,
	notice_board_reg_date
FROM
	notice_board
</select>
</mapper>
